## Part 0. æäº¤è¦æ±‚ && Junitè¦æ±‚ ğŸ¤£

è¯·ä¿è¯æäº¤é¡¹ç›®çš„é¡¶å±‚ç›®å½•å­˜åœ¨ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼š`src`å’Œ`test`ï¼ˆå‘½åéœ€ä¸¥æ ¼ä¸æ­¤ä¿æŒä¸€è‡´ï¼‰ï¼Œè¯·å°†ä½œä¸šçš„**åŠŸèƒ½ä»£ç **å­˜æ”¾äº`src`æ–‡ä»¶å¤¹ä¸‹ï¼ŒåŒæ—¶å°†ç›¸å…³**junitæµ‹è¯•ç±»ä»£ç **æ–‡ä»¶å­˜æ”¾äº`test`æ–‡ä»¶å¤¹ä¸‹ï¼Œä»¥ä¿è¯è¯„æµ‹çš„æ­£å¸¸è¿›è¡Œï¼ˆè¯„æµ‹æ—¶**åªä¼š**é’ˆå¯¹`src`ç›®å½•ä¸‹çš„æ–‡ä»¶è¿›è¡Œç¨‹åº**åŠŸèƒ½**çš„è¯„æµ‹ä»¥åŠä»£ç é£æ ¼æ£€æµ‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œ`test`ç›®å½•ä¸‹çš„junitæµ‹è¯•ä»£ç é£æ ¼ä¸ä¼šè¢«æ£€æµ‹ï¼‰ã€‚å‚è€ƒç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```plaintext
|-src
  |- Bottle.java
  |- Equipment.java
  |- ...
|-test
  |- BottleTest.java
  |- EquipmentTest.java
  |- ...
```

æœ¬æ¬¡ä½œä¸šï¼Œè¦æ±‚Junitæµ‹è¯•è¦†ç›–ç‡ä¿è¯method >= 90ï¼…ï¼Œline >= 60%ï¼Œbranch >= 60%ã€‚ï¼ˆideaæ˜¾ç¤ºçš„è¦†ç›–ç‡å’Œè¯„æµ‹æµ‹åˆ°çš„è¦†ç›–ç‡å¯èƒ½ç•¥æœ‰å·®åˆ«ï¼Œè¯·åŒå­¦ä»¬ä»¥è¯„æµ‹ä¸ºå‡†ã€‚åŒæ—¶è¯·ä¸è¦ä½¿ç”¨assertè¿›è¡Œæ–­è¨€ä»¥å…é€ æˆä¸å¿…è¦çš„è¦†ç›–ç‡æŸå¤±ï¼‰

## Part 1. è®­ç»ƒç›®æ ‡ ğŸ˜˜

- æŒæ¡å’Œç†è§£è®¾è®¡æ¨¡å¼çš„ä½œç”¨å’Œæ„ä¹‰
- åœ¨ä½œä¸šä¸­ä½“éªŒè®¾è®¡æ¨¡å¼çš„ç†å¿µ

## Part 2. é¢„å¤‡çŸ¥è¯† ğŸ˜¶â€ğŸŒ«ï¸

åœ¨ä¹‹å‰çš„ç¼–ç¨‹ä»»åŠ¡ä¸­ï¼Œè™½ç„¶åŒå­¦ä»¬åŠªåŠ›åœ°å®Œæˆäº†è¯¾ä¸‹ä½œä¸šï¼Œä½†æ˜¯åŒå­¦ä»¬å®Œæˆä»»åŠ¡çš„æ–¹å¼æˆ–è®¸åœ¨ç³»ç»ŸåŒ–ã€æ¨¡å—åŒ–å’Œè§„èŒƒåŒ–æ–¹é¢æœ‰æ‰€æ¬ ç¼ºã€‚æ‰€ä»¥åœ¨æœ¬æ¬¡ä½œä¸šä¸­ï¼Œå¸Œæœ›åŒå­¦ä»¬èƒ½äº²èº«ä½“éªŒ**è®¾è®¡æ¨¡å¼**çš„ç†å¿µï¼Œä»¥æ›´åŠ å·¥ç¨‹åŒ–çš„æ–¹æ³•æ¥å®Œæˆæœ¬æ¬¡ä½œä¸šå’Œæœªæ¥çš„ä»»åŠ¡ã€‚

æ¥ä¸‹æ¥ä¾æ¬¡ä»‹ç»**å•ä¾‹æ¨¡å¼**ï¼Œ**å·¥å‚æ¨¡å¼**å’Œ**è§‚å¯Ÿè€…æ¨¡å¼**ã€‚

### ä¸€ã€å•ä¾‹æ¨¡å¼

**å•ä¾‹æ¨¡å¼**æ˜¯ç¡®ä¿ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œè€Œä¸”è‡ªè¡Œå®ä¾‹åŒ–å¹¶å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ã€‚

> çŸ¥è¯†å›é¡¾-å®ä¾‹ å®ä¾‹æŒ‡çš„æ˜¯é€šè¿‡ä½¿ç”¨ç±»åˆ›å»ºçš„å…·ä½“å¯¹è±¡ã€‚å®ƒå ç”¨å†…å­˜å¹¶æŒæœ‰å¯¹è±¡çš„æ•°æ®å’Œæ–¹æ³•ã€‚å®ä¾‹æ˜¯çœŸæ­£å­˜åœ¨çš„ï¼Œå¯ä»¥æ‰§è¡Œå„ç§æ“ä½œå’Œè®¿é—®å…¶å±æ€§ã€‚

#### 1.å¦‚ä½•ä¿è¯æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªå®ä¾‹ï¼Ÿ

è¯¥ç±»çš„æ„é€ æ–¹æ³•ä¸€å®šæ˜¯ `private` çš„ï¼Œå³ä¸å¯ä»¥è¢«å¤–ç•Œè¿›è¡Œå®ä¾‹åŒ–ã€‚ä¸”è¿™ä¸ªå®ä¾‹æ˜¯å±äºå½“å‰ç±»çš„é™æ€æˆå‘˜å˜é‡ã€‚

```java
public class Singleton {
    // æ³¨æ„static
    private static Singleton singleton;

    // æ³¨æ„private
    private Singleton(/*parameters*/) {
        /* ... */
    }
}    
```

#### 2.å¦‚ä½•å‘æ•´ä¸ªç³»ç»Ÿæä¾›è¿™ä¸ªå®ä¾‹ï¼Ÿ

è¯¥ç±»åº”æä¾›ä¸€ä¸ªé™æ€æ–¹æ³•ï¼Œèƒ½å¤Ÿå‘å¤–ç•Œ/ç³»ç»Ÿæä¾›å½“å‰ç±»çš„å®ä¾‹

```java
public static Singleton getInstance() {
        return singleton;
}
```

#### 3.åœ¨ä»€ä¹ˆæ—¶æœºè¿›è¡Œè¯¥ç±»å•ä¾‹çš„å®ä¾‹åŒ–ï¼Ÿ

- é¥¿æ±‰å¼ï¼šåœ¨ç±»åŠ è½½æ—¶å°±è¿›è¡Œå®ä¾‹åŒ–

```java
public class Singleton {
    private static Singleton singleton = new Singleton(/* paramters */);
}    
```

- æ‡’æ±‰å¼ï¼šåœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶è¿›è¡Œå®ä¾‹åŒ–

```java
public class Singleton {
    private static Singleton singleton;

    /* ... */

    public static Singleton getInstance() {
        // å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ï¼š
        if (singleton == null) {
            singleton = new Singleton(/* paramters */);
        }
        return singleton;
    }
}    
```

> äº‹å®ä¸Šï¼Œ`getInstance()` æ–¹æ³•è¿˜éœ€è¦æ³¨æ„å¤šçº¿ç¨‹çš„åŒæ­¥é—®é¢˜ï¼Œè¿™éƒ¨åˆ†ç­‰æˆ‘ä»¬ä¸ŠOOæ­£è¯¾æ—¶å†è¿›è¡Œäº†è§£ã€‚

### äºŒã€å·¥å‚æ¨¡å¼

å·¥å‚æ–¹æ³•æ¨¡å¼ (Factory Method Pattern) åˆç§°ä¸ºå·¥å‚æ¨¡å¼ï¼Œä¹Ÿå«è™šæ‹Ÿæ„é€ å™¨ (Virtual Constructor) æ¨¡å¼æˆ–è€…å¤šæ€å·¥å‚ (Polymorphic Factory) æ¨¡å¼ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹æ¨¡å¼ã€‚

### ç®€å•å·¥å‚æ¨¡å¼

ç®€å•å·¥å‚æ¨¡å¼ (Simple Factory Pattern):åˆç§°ä¸ºé™æ€å·¥å‚æ–¹æ³• (Static Factory Method) æ¨¡å¼ï¼Œå®ƒå±äºç±»åˆ›å»ºå‹æ¨¡å¼ã€‚ åœ¨ç®€å•å·¥å‚æ¨¡å¼ä¸­ï¼Œå¯ä»¥æ ¹æ®å‚æ•°çš„ä¸åŒè¿”å›ä¸åŒç±»çš„å®ä¾‹ã€‚ç®€å•å·¥å‚æ¨¡å¼ä¸“é—¨å®šä¹‰äº†ä¸€ä¸ªç±»æ¥è´Ÿè´£åˆ›å»ºå…¶ä»–ç±»çš„å®ä¾‹ï¼Œè¢«åˆ›å»ºçš„å®ä¾‹é€šå¸¸éƒ½å…·æœ‰å…±åŒçš„çˆ¶ç±»ã€‚ 

![image1](image/image1.png)

#### 1. äº§å“å’Œå…¶å…±åŒçš„çˆ¶ç±»

è¿™ä¸ªçˆ¶ç±»é€šå¸¸éƒ½æ˜¯ **æŠ½è±¡ç±»** ï¼Œå°±åƒæˆ‘ä»¬åœ¨ç”Ÿäº§ä¸€ä¸ªæ‰‹æœºçš„æ—¶å€™ï¼Œä»–ä¸èƒ½åªæ˜¯ä¸€ä¸ªæ‰‹æœºï¼Œä»–ä¸€å®šæ˜¯iPhoneã€Samsungã€åä¸ºã€å°ç±³â€¦â€¦å…¶ä¸­çš„ä¸€ç§ã€‚

> çŸ¥è¯†è¡¥å……-æŠ½è±¡ç±»æŠ½è±¡ç±»å¯ä»¥è¢«ç†è§£æˆä¸€ä¸ªå¯ä»¥åŒ…å«æ™®é€šæ–¹æ³•å’Œæˆå‘˜å˜é‡çš„æ¥å£ï¼Œåœ¨è¢«å­ç±»ç»§æ‰¿æ—¶å¯ä»¥é€‰æ‹©æ€§çš„*Override*æŠ½è±¡ç±»çš„æ–¹æ³•ã€‚ æ·±å…¥å†…å®¹åŒå­¦ä»¬å¯ä»¥è¯¾ä¸‹è‡ªè¡Œäº†è§£ã€‚

```java
public abstract class Product {
    private int price;

    public Product(int price) {
        this.price = price;
    }

    public abstract void use();

    public void information() {
        System.out.println(this.price);
    }
}
public class ProductA extends Product{
    public ProductA(int price) {
        super(price);
    }

    @Override
    public void use() {
        System.out.println("AAAA!");
    }
}
public class ProductB extends Product {
    public ProductB(int price) {
        super(price);
    }

    @Override
    public void use() {
        System.out.println("BBBB");
    }
}
```

#### 2.å®šä¹‰å·¥å‚æ¥è´Ÿè´£åˆ›å»ºå…¶ä»–ç±»çš„å®ä¾‹

```java
public class Factory {
    public static Product create(String type) {
        if (type.equalsIgnoreCase("A")) {
            return new ProductA(100);
        } else if (type.equalsIgnoreCase("B")) {
            return new ProductB(200);
        } else {
            System.out.println("Wrong kind!");
            return null;
        }
    }
}
```

#### 3.ç”Ÿäº§äº§å“

```java
public class MainClass {
    public static void main(String[] args) {
        Product productA = Factory.create("A");
        Product productB = Factory.create("B");
        Product productC = Factory.create("C");
        /* ... */
    }
}
```

### å·¥å‚æ¨¡å¼

å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£ï¼Œè®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»ã€‚å·¥å‚æ–¹æ³•ä½¿ä¸€ä¸ªç±»çš„å®ä¾‹åŒ–å»¶è¿Ÿåˆ°å…¶å­ç±»ã€‚ å·¥å‚æ¨¡å¼å’Œæˆ‘ä»¬ä¹‹å‰ä»‹ç»è¿‡çš„ç®€å•å·¥å‚æ¨¡å¼éƒ½å±äºé¢å‘å¯¹è±¡è®¾è®¡æ–¹æ³•ä¸­çš„åˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒä»¬çš„ç›®æ ‡éƒ½æ˜¯è§£å†³å¯¹è±¡çš„åˆ›å»ºè¿‡ç¨‹ã€‚ä»–ä»¬éƒ½ç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œå°†å¯¹è±¡çš„å®ä¾‹åŒ–ä¸å®¢æˆ·ç«¯ä»£ç åˆ†ç¦»ã€‚ ä½†äºŒè€…ä»ç„¶æœ‰ä¸åŒä¹‹å¤„ã€‚ é¦–å…ˆï¼ŒäºŒè€…çš„æŠ½è±¡ç¨‹åº¦ä¸åŒï¼šå·¥å‚æ¨¡å¼æ›´æŠ½è±¡ï¼Œå®ƒé€šè¿‡å®šä¹‰ä¸€ä¸ªæŠ½è±¡å·¥å‚æ¥å£å’Œå¤šä¸ª**å®ç°å·¥å‚å­ç±»**æ¥ç”Ÿäº§ä¸åŒç±»å‹çš„äº§å“ï¼›è€Œç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”±ä¸€ä¸ªå…·ä½“çš„å·¥å‚ç±»è´Ÿè´£åˆ›å»ºæ‰€æœ‰çš„äº§å“å¯¹è±¡ã€‚ æ­¤å¤–ï¼ŒäºŒè€…åœ¨æ‰©å±•æ€§ä¸Šä¹Ÿå±•ç¤ºå‡ºä¸åŒç‰¹ç‚¹ã€‚å½“æ–°å¢ä¸€ç§äº§å“æ—¶ï¼Œå·¥å‚æ¨¡å¼åªéœ€æ–°å¢ä¸€ä¸ªå¯¹åº”çš„å·¥å‚å­ç±»å³å¯ï¼Œè€Œç®€å•å·¥å‚æ¨¡å¼åœ¨æ–°å¢äº§å“æ—¶éœ€è¦ä¿®æ”¹åŸæœ‰çš„å·¥å‚ç±»ï¼Œè¿™å°±è¿åäº†å¼€é—­åŸåˆ™ã€‚

> çŸ¥è¯†è¡¥å……-å¼€é—­åŸåˆ™(Open-Closed Principle, OCP)æ˜¯æŒ‡ä¸€ä¸ªè½¯ä»¶å®ä½“å¦‚ç±»ã€æ¨¡å—å’Œå‡½æ•°åº”è¯¥å¯¹æ‰©å±•å¼€æ”¾, å¯¹ä¿®æ”¹å…³é—­ã€‚é€šä¿—è§£é‡Šå°±æ˜¯ï¼Œæ·»åŠ ä¸€ä¸ªæ–°çš„åŠŸèƒ½ï¼Œåº”è¯¥é€šè¿‡åœ¨å·²æœ‰ä»£ç (æ¨¡å—ã€ç±»ã€æ–¹æ³•)çš„åŸºç¡€ä¸Šè¿›è¡Œæ‰©å±•æ¥å®ç°ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å·²æœ‰ä»£ç ã€‚ æ·±å…¥å†…å®¹åŒå­¦ä»¬å¯ä»¥è¯¾ä¸‹è‡ªè¡Œäº†è§£ã€‚

æœ€åï¼Œå°±æ˜¯å·¥å‚è¢«è°ƒç”¨çš„æ–¹å¼ä¸åŒï¼šå·¥å‚æ¨¡å¼è°ƒç”¨å·¥å‚æ¥å£æ¥åˆ›å»ºå…·ä½“çš„äº§å“å¯¹è±¡ï¼›è€Œç®€å•å·¥å‚æ¨¡å¼ç›´æ¥è°ƒç”¨å·¥å‚ç±»çš„é™æ€æ–¹æ³•ï¼Œå¹¶ä¼ å…¥ä¸€ä¸ªå‚æ•°æ¥æŒ‡å®šåˆ›å»ºçš„å…·ä½“äº§å“ç±»å‹ã€‚

é€šä¿—æ¥è®²ï¼Œå°±æ˜¯ç®€å•å·¥å‚æ¨¡å¼æ˜¯ç”¨ä¸€ä¸ªå‚ç”Ÿäº§å¤šä¸ªäº§å“ï¼Œè€Œå·¥å‚æ¨¡å¼åˆ™æ˜¯å¤šä¸ªå‚ç”Ÿäº§ä¸åŒçš„äº§å“ã€‚ 

![image2](image/image2.png)

#### 1.å®šä¹‰ä¸€ä¸ªç”¨äºåˆ›å»ºå¯¹è±¡çš„æ¥å£

```java
public interface Factory {
    public Product creat(int price);
}
```

#### 2.è®©å­ç±»å†³å®šå®ä¾‹åŒ–å“ªä¸ªç±»

```java
public class FactoryA implements Factory{
    @Override
    public Product creat(int price) {
        return new ProductA(price);
    }
}
public class FactoryB implements Factory{
    @Override
    public Product creat(int price) {
        return new ProductB(price);
    }
}
public class MainClass {
    public static void main(String[] args) {
        Factory factoryA = new FactoryA();
        Factory factoryB = new FactoryB();
        factoryA.creat(100).use();
        factoryB.creat(200).use();
    }
}
```

### æŠ½è±¡å·¥å‚æ¨¡å¼

æŠ½è±¡å·¥å‚æ¨¡å¼(Abstract Factory Pattern)ï¼šæä¾›ä¸€ä¸ªåˆ›å»ºä¸€ç³»åˆ—ç›¸å…³æˆ–ç›¸äº’ä¾èµ–å¯¹è±¡çš„æ¥å£ï¼Œè€Œæ— é¡»æŒ‡å®šå®ƒä»¬å…·ä½“çš„ç±»ã€‚æŠ½è±¡å·¥å‚æ¨¡å¼åˆç§°ä¸ºKitæ¨¡å¼ï¼Œå®ƒæ˜¯ä¸€ç§å¯¹è±¡åˆ›å»ºå‹æ¨¡å¼ã€‚

å¦‚æœè¯´å·¥å‚æ¨¡å¼åªèƒ½æ„å»ºåŒä¸€å“ç±»/ç­‰çº§çš„äº§å“ï¼Œä¾‹å¦‚æ‰‹æœºï¼ˆiPhone HUAWEI Samsungâ€¦ï¼‰ã€‚é‚£ä¹ˆæŠ½è±¡å·¥å‚æ¨¡å¼åˆ™æ”¯æŒäº†å¤šç§å“ç±»ï¼Œä¾‹å¦‚æ‰‹æœºã€ç¬”è®°æœ¬ç”µè„‘ã€ç”µè§†â€¦â€¦å®ƒæ‰“ç ´äº†å·¥å‚å’Œäº§å“ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œä»–æ»¡è¶³ä¸€ä¸ªå…·ä½“çš„å·¥å‚ç±»å¯ä»¥ç”Ÿäº§å¤šä¸ªå¤§ç±»çš„äº§å“

![image3](image/image3.png)

#### 1. äº§å“ç±»

æ‰‹æœºç±»äº§å“ï¼š

```java
public abstract class Phone {
    private int price;

    public Phone(int price) {
        this.price = price;
    }

    public abstract void use();
}
public class iPhone extends Phone{
    public iPhone(int price) {
        super(price);
    }

    @Override
    public void use() {
        System.out.println("APPLE iPhone!!!");
    }
}
public class Honor extends Phone{
    public Honor(int price) {
        super(price);
    }

    @Override
    public void use() {
        System.out.println("HUAWEI Honor!!!");
    }
}
```

------

ç¬”è®°æœ¬ç”µè„‘ç±»äº§å“ï¼š

```java
public abstract class Laptop {
    private int size;

    public Laptop(int size) {
        this.size = size;
    }

    public abstract void use();
}
public class iMac extends Laptop{
    public iMac(int size) {
        super(size);
    }

    @Override
    public void use() {
        System.out.println("APPLE iMac!!");
    }
}
public class MateBook extends Laptop{
    public MateBook(int size) {
        super(size);
    }

    @Override
    public void use() {
        System.out.println("HUAWEI MateBook!!");
    }
}
```

#### 2. å·¥å‚ç±»

```java
public interface Factory {
    public Phone creatPhone(int price);
    public Laptop creatLaptop(int size);
}
public class BJFactory implements Factory {
    @Override
    public Phone creatPhone(int price) {
        return new Honor(price);
    }

    @Override
    public Laptop creatLaptop(int size) {
        return new MateBook(size);
    }
}
public class LAFactory implements Factory {
    @Override
    public Phone creatPhone(int price) {
        return new iPhone(price);
    }

    @Override
    public Laptop creatLaptop(int size) {
        return new iMac(size);
    }
}
```

#### 3. å®¢æˆ·ç«¯è°ƒå–

```java
public class MainClass {
    public static void main(String[] args) {
        Factory Beijing = new BJFactory();
        Factory LosAngeles = new LAFactory();
        Beijing.creatPhone(8000).use();
        LosAngeles.creatPhone(11000).use();
        Beijing.creatLaptop(15).use();
        LosAngeles.creatLaptop(13).use();
    }
}
```

è¾“å‡º

```txt
HUAWEI Honor!!!
APPLE iPhone!!!
HUAWEI MateBook!!
APPLE iMac!!
```

### ä¸‰ã€è§‚å¯Ÿè€…æ¨¡å¼

è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰æ˜¯ä¸€ç§è¡Œä¸ºå‹è®¾è®¡æ¨¡å¼ï¼Œå®ƒå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå…¶æ‰€æœ‰ä¾èµ–è€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚

### è§‚å¯Ÿè€…æ¨¡å¼è§£æ

è§‚å¯Ÿè€…--å¤š è¢«è§‚å¯Ÿè€…--1 æˆ‘ä»¬ä¸¾ä¸€ä¸ªä¾‹å­ï¼ŒåŒå­¦ä»¬ç»å¸¸åœ¨Bç«™çœ‹upä¸»ä»¬å‘çš„è§†é¢‘ï¼Œå½“å…³æ³¨çš„upä¸»æ›´æ–°è§†é¢‘æ—¶ï¼Œä¼šæ”¶åˆ°ä»–çš„æ›´æ–°é€šçŸ¥ã€‚

#### 1.åˆ›å»ºupä¸»å’Œç”¨æˆ·æ¥å£

```java
public interface Uploader {
    public void addFollower(User follower); // å¢åŠ å…³æ³¨
    public void notifyFollowers(); // é€šçŸ¥æ‰€æœ‰å…³æ³¨ç”¨æˆ·
}
public interface User {
    public void watch();
}
```

#### 2.å®ç°upä¸»å’Œç”¨æˆ·æ¥å£

```java
import java.util.ArrayList;

public class Up implements Uploader {
    // ç®¡ç†è§‚ä¼—ä»¬
    public ArrayList<User> followers = new ArrayList<>();
    // æ›´æ–°çŠ¶æ€ TRUE - æ›´æ–°äº† :) FALSE - æ²¡æ›´æ–° :(
    public boolean updatingStatus;

    @Override
    public void addFollower(User follower) {
        followers.add(follower);
    }

    @Override
    public void notifyFollowers() {
        followers.forEach(follower -> follower.watch(this));
        /* <==>
        for (User follower : followers) {
            follower.watch(this);
        }
        */
    }
}
public class Follower implements User{
    private String name;

    public Follower(String name) {
        this.name = name;
    }

    @Override
    public void watch(Up up) {
        System.out.println(name + " is watching " + up.name + "'s channel");
    }
}
```

#### 3.è¢«è§‚å¯Ÿè€…çŠ¶æ€æ”¹å˜ â†’ é€šçŸ¥è§‚å¯Ÿè€…ï¼

```java
public class MainClass {
    public static void main(String[] args) {
        Uploader classmateHe = new Up("ä½•åŒå­¦");
        classmateHe.addFollower(new Follower("AAA"));
        classmateHe.addFollower(new Follower("BBB"));

        // ä½•åŒå­¦æ›´æ–°äº†ï¼
        classmateHe.notifyFollowers();
    }
}
```
``` java
AAA is watching ä½•åŒå­¦'s channel
BBB is watching ä½•åŒå­¦'s channel
```

## Part 3. é¢˜ç›®æè¿° ğŸ˜

### èƒŒæ™¯

æœ¬æ¬¡ä½œä¸šå°†æ˜¯é¢å‘å¯¹è±¡å…ˆå¯¼è¯¾ç¨‹çš„æœ€åä¸€æ¬¡è¿­ä»£å¼€å‘ã€‚æ ¸å¿ƒè¦ç‚¹åŒ…æ‹¬ä½†ä¸é™äºï¼š

- é›‡ä½£ä¸æ´åŠ©ç³»ç»Ÿå®ç°ï¼šå®ç°é›‡ä½£å…³ç³»å»ºç«‹ã€è®°å½•ä½“åŠ›çŠ¶æ€ã€æ´åŠ©é€»è¾‘å®ç°ã€é›‡ä½£å…³ç³»è§£é™¤
- é€’å½’æ”»å‡»æˆ˜æ–—å®ç°ï¼šå®šä¹‰é€’å½’æ”»å‡»é€»è¾‘ã€è®¾ç½®é€’å½’æ·±åº¦é™åˆ¶ã€æˆ˜æ–—ç±»å‹å¤„ç†
- ç§˜å¢ƒå·¥å‚æ¢é™©å‰¯æœ¬è®¾è®¡ï¼šæˆ˜æ–—åŠ›å¯¹æ¯”æœºåˆ¶ã€é¡ºåºæŒ‘æˆ˜é€»è¾‘ã€å®ç‰©åŠ æˆç³»ç»Ÿ

### é›‡ä½£ä¸æ´åŠ©

åœ¨æœ¬æ¬¡ä½œä¸šä¸­ï¼Œå†’é™©è€…é—´å¯ç›¸äº’é›‡ä½£ï¼Œå¹¶è®¾æœ‰â€œæ´åŠ©â€æœºåˆ¶ï¼Œä½†æ­¤åŠŸèƒ½ä»…åœ¨ï¼ˆç¬¬äº”æ¬¡ä½œä¸šå¼•å…¥çš„**æ™®é€š**æˆ˜æ–—ä¸­ç”Ÿæ•ˆï¼‰ã€‚

å‡è®¾ä¸€æ¬¡æˆ˜æ–—çš„è¢«æ”»å‡»è€…åºåˆ—ä¸º *defender1*,*defender2*,â€¦,*defenderk*ã€‚è¢«å†’é™©è€…é›‡ä½£çš„å†’é™©è€…ä»¬éœ€è¦å¯†åˆ‡å…³æ³¨é›‡ä¸»çš„ä½“åŠ›çŠ¶æ€ã€‚å…·ä½“è§„åˆ™å¦‚ä¸‹ï¼š

1. **æˆ˜æ–—å‰å‡†å¤‡**ï¼šå¯¹äºæ¯ä¸ª *defenderi*ï¼Œè¢« *defenderi* é›‡ä½£çš„å†’é™©è€…ä»¬ä¼šè®°å½• *defenderi* å½“å‰çš„ä½“åŠ›ã€‚

2. **æˆ˜æ–—åå¤„ç†**ï¼šè‹¥æˆ˜æ–—å¤±è´¥ï¼Œåˆ™ä¸å‘ç”Ÿä»»ä½•å˜åŒ–ã€‚è‹¥æˆ˜æ–—**æˆåŠŸ**ï¼Œåˆ™éµå¾ªä»¥ä¸‹æµç¨‹ï¼š

   - é¦–å…ˆï¼Œæ‰€æœ‰å—æ”»å‡»è€…ä½“åŠ›æ ¹æ®ç¬¬äº”æ¬¡ä½œä¸šçš„è§„å®šå‘ç”Ÿç›¸åº”å˜åŒ–ã€‚

   - å…¶æ¬¡ï¼Œæ”»å‡»è€…è£…å¤‡è€ä¹…å‡ä¸€ï¼Œè‹¥è€ä¹…å½’é›¶åˆ™è£…å¤‡è¢«é”€æ¯ã€‚

   - æ¥ç€ï¼Œè‹¥å—æ”»å‡»è€… *defenderi* çš„ä½“åŠ›<=`ç«™å‰ä½“åŠ›å€¼ / 2`ï¼Œå…¶é›‡ä½£çš„å†’é™©è€…å°†å°è¯•ç»™äºˆ *defenderi* **è‡ªå·±**æºå¸¦çš„æ‰€æœ‰è£…å¤‡ï¼ˆè‹¥è¢«é›‡ä½£çš„å†’é™©è€…æœªæºå¸¦è£…å¤‡ï¼Œåˆ™ä¸è¿›è¡Œä»»ä½•æ“ä½œï¼‰ï¼Œå³è¢«é›‡ä½£çš„å†’é™©è€…ä¸å†æºå¸¦ã€ä¸å†æ‹¥æœ‰è¿™äº›è£…å¤‡ï¼Œè€Œ *defenderi* æ‹¥æœ‰ä½†å¹¶æœªæºå¸¦è¿™äº›è£…å¤‡ã€‚æ— è®ºæ˜¯å¦æˆåŠŸç»™äºˆè£…å¤‡ï¼Œæ¯ä½å‚ä¸æ´åŠ©çš„å†’é™©è€…éƒ½ä¼šå¢åŠ ä¸€æ¬¡å¯¹ *defenderi* çš„æ´åŠ©æ¬¡æ•°è®°å½•ã€‚

   - è¿›è¡Œæ´åŠ©åï¼Œå†’é™©è€…ä¼šè¯„å®šè‡ªå·±æ´åŠ© *defenderi* çš„æ¬¡æ•°ã€‚è‹¥æ­¤æ—¶è¢« *defenderi* é›‡ä½£çš„å†’é™©è€… A æ´åŠ© *defenderi* çš„æ¬¡æ•°**ä¸¥æ ¼å¤§äº 3**ï¼Œåˆ™å†’é™©è€… A å°†è‡ªè¡Œè§£å¼€ä¸ *defenderi* çš„é›‡ä½£å…³ç³»ï¼Œå³ A ä¸å†è¢«è§†ä¸ºè¢« *defenderi* é›‡ä½£çš„å†’é™©è€…ã€‚

     **æ³¨æ„**ï¼šæ­¤åè‹¥ A å†æ¬¡è¢« *defenderi* é›‡ä½£ï¼Œé‚£ä¹ˆæ´åŠ© *defenderi* çš„æ¬¡æ•°**é‡æ–°ä»é›¶å¼€å§‹è®¡ç®—**ã€‚

3. **æ´åŠ©é¡ºåº**ï¼šä¸¥æ ¼éµå¾ªè¾“å…¥çš„è¢«æ”»å‡»è€…é¡ºåºè¿›è¡Œã€‚ä¾‹å¦‚ï¼Œè‹¥`adv_3`åŒæ—¶å—é›‡äº`adv_1`å’Œ`adv_2`ï¼Œä¸”ä¸¤è€…å‡éœ€æ´åŠ©ï¼Œåˆ™ï¼š

   - `adv_3`å…ˆæ´åŠ©è¾“å…¥é¡ºåºé å‰çš„`adv_1`ï¼šå°è¯•å°†æ‰€æœ‰è‡ªå·±æºå¸¦çš„è£…å¤‡ç»™äºˆ `adv_1`ï¼Œæ´åŠ© `adv_1` æ¬¡æ•° +1
   - å†æ´åŠ©`adv_2`ï¼šå°è¯•å°†æ‰€æœ‰è‡ªå·±æºå¸¦çš„è£…å¤‡ç»™äºˆ `adv_2`ï¼Œä½†æ­¤æ—¶ `adv_3` æ²¡æœ‰æºå¸¦è£…å¤‡ï¼Œæ‰€ä»¥æ— äº‹å‘ç”Ÿã€‚æ´åŠ© `adv_2` æ¬¡æ•° +1

4. **é›‡ä½£å…³ç³»æ˜ç¡®æ€§**ï¼šæœ‰ä¸”ä»…æœ‰é€šè¿‡ 11 å·æŒ‡ä»¤æ‰èƒ½å»ºç«‹é›‡ä½£å…³ç³»ï¼Œä¹Ÿå³ï¼Œè‹¥ A é›‡ä½£ Bï¼ŒB é›‡ä½£ Cï¼Œè€Œ A æœªåœ¨ 11 å·æŒ‡ä»¤ä¸­é›‡ä½£ Cï¼Œåˆ™ C ä¸è¢«è§†ä¸ºè¢« A é›‡ä½£çš„å†’é™©è€…ï¼ŒC ä¹Ÿä¸ç”¨åœ¨ A é€€å‡ºæˆ˜æ–—çš„æ—¶å€™ç»™ A è£…å¤‡ã€‚

### é€’å½’æ”»å‡»

æœ¬æ¬¡ä½œä¸šæ–°å¢æˆ˜æ–—ç±»å‹ï¼Œå³è¿ç¯é€’å½’æ”»å‡»æ¨¡å¼ã€‚å†æ¬¡å¼ºè°ƒï¼Œæ´åŠ©åŠŸèƒ½åœ¨è¯¥åœºæ™¯ä¸­**æ— æ•ˆ**ï¼Œä¸é€ æˆä»»ä½•å½±å“ã€‚

**åœ¨æˆ˜æ–—æˆåŠŸçš„åŸºç¡€ä¸Š**ï¼ˆè§„åˆ™è¯¦è§ç¬¬äº”æ¬¡ä½œä¸šï¼Œå€¼å¾—å¼ºè°ƒçš„æ˜¯ï¼šå—æ”»å‡»æ–¹çš„æ•´ä½“é˜²å¾¡èƒ½åŠ›æ˜¯**é€’å½’åæ‰€æœ‰æ½œåœ¨å—æ”»å‡»è€…**é˜²å¾¡åŠ›ä¸­çš„æœ€å¤§å€¼ï¼‰ï¼Œé€’å½’æ”»å‡»ç®€åŒ–ä¸ºä¸¤ä¸ªæ ¸å¿ƒæ­¥éª¤ï¼š

1. **è¯†åˆ«æ½œåœ¨å—æ”»å‡»è€…**ï¼šå½¢æˆå—æ”»å‡»è€…é›†åˆã€‚
2. **éå†é›†åˆ**ï¼šç¡®ä¿æ¯ä½å†’é™©è€…ä»…å—ä¸€æ¬¡æ”»å‡»ã€‚

å…³äºå¦‚ä½•è¯†åˆ«æ½œåœ¨å—æ”»å‡»è€…ï¼Œè§„åˆ™ç®€è¿°å¦‚ä¸‹ï¼š

å½“å†’é™©è€…å‘èµ·è¿ç¯é€’å½’æ”»å‡»æ—¶ï¼Œå…¶ç›®æ ‡å¯èƒ½åŒ…æ‹¬å¤šä½å†’é™©è€…ï¼Œé€’å½’æ·±åº¦é™åˆ¶ä¸º 5ã€‚

åˆå§‹å—æ”»å‡»è€…é›†åˆè®¾ä¸º *A*1,*B*1,*C*1,â€¦ã€‚å¯¹äºé›†åˆä¸­ä»»ä¸€å†’é™©è€…ï¼ˆå¦‚ *A*1ï¼‰ï¼Œè¯¥å†’é™©è€…åŠå…¶é›‡ä½£çš„æ‰€æœ‰å†’é™©è€…ï¼ˆå¦‚ *A*2ï¼Œ*A*2å†é›‡ä½£çš„ç­‰ï¼‰å‡è¢«è§†ä¸ºæ½œåœ¨å—æ”»å‡»è€…ï¼Œå¹¶é€’å½’åœ°åŠ å…¥é›†åˆã€‚æ­¤è¿‡ç¨‹æŒç»­è¿›è¡Œï¼Œå½“é€’å½’åˆ°ç¬¬5å±‚ï¼ˆå³åˆ°è¾¾ *A*5æ—¶ï¼‰ï¼Œå°† *A*5 åŠ å…¥é›†åˆï¼Œä½†ä¸ä¼šå†é€’å½’è€ƒè™‘ *A*5 é›‡ä½£çš„å†’é™©è€…ï¼Œè‡³æ­¤å®Œæˆä»¥ *A*1ä¸ºèµ·ç‚¹çš„æ”»å‡»åºåˆ—åˆ†æ”¯ã€‚

é‡è¦çš„æ˜¯ï¼Œæ­¤è¿‡ç¨‹æŒ‰åˆå§‹å—æ”»å‡»è€…é›†åˆä¸­å†’é™©è€…çš„è¾“å…¥é¡ºåºé€ä¸€è¿›è¡Œï¼Œç¡®ä¿æ‰€æœ‰æŒ‡å®šç›®æ ‡å‡è¢«å…¨é¢ä¸”æ·±å…¥åœ°è¦†ç›–ã€‚

> ç¤ºä¾‹-Example
>
> è‹¥æ¸¸æˆä¸­æœ‰ä¸ƒä½å†’é™©è€…ï¼š**A**ã€**B**ã€**C**ã€**D**ã€**E**ã€**F** å’Œ **G**ï¼Œä»–ä»¬ä¹‹é—´çš„é›‡ä½£å…³ç³»å¦‚ä¸‹ï¼š
>
> - **A** é›‡ä½£äº† **B** å’Œ **C**ã€‚
> - **C** ä¾æ¬¡é›‡ä½£äº† **D**ã€**D** é›‡ä½£äº† **E**ã€**E** é›‡ä½£äº† **F**ã€**F** é›‡ä½£äº† **G**ã€‚
> - **B** æ²¡æœ‰é›‡ä½£ä»»ä½•å†’é™©è€…ã€‚
>
> é›‡ä½£å…³ç³»å›¾å¦‚ä¸‹ï¼š
>
> ![é›‡ä½£å…³ç³»å›¾](image/all.png)
>
> ç°åœ¨ï¼Œæˆ‘ä»¬è¦å¯¹ **{A, E}** å‘èµ·è¿ç¯é€’å½’æ”»å‡»ã€‚
>
> **æ­¥éª¤1ï¼šè¯†åˆ«æ½œåœ¨å—æ”»å‡»è€…**
>
> 1. åˆå§‹çŠ¶æ€ï¼šå—æ”»å‡»è€…é›†åˆä¸º{A,E}ã€‚
>
> 2. å¤„ç†Aï¼š
>
>    - **A** è¢«åŠ å…¥æ½œåœ¨å—æ”»å‡»è€…é›†åˆã€‚
>
>    - **A** é›‡ä½£äº† **B** å’Œ **C**ï¼Œå› æ­¤ **B** å’Œ **C** è¢«åŠ å…¥é›†åˆã€‚
>
>    - **C** é›‡ä½£äº† **D**ï¼Œæ‰€ä»¥ **D** è¢«åŠ å…¥é›†åˆã€‚æ¥ç€ï¼Œ**D** é›‡ä½£äº† **E**ï¼Œ**E** é›‡ä½£äº† **F**ï¼Œæ‰€æœ‰è¿™äº›å†’é™©è€…éƒ½è¢«åŠ å…¥é›†åˆã€‚é€’å½’è‡³ **F**ï¼Œå³è¾¾åˆ°é€’å½’æ·±åº¦é™åˆ¶åï¼Œåœæ­¢è¿›ä¸€æ­¥é€’å½’ã€‚
>
>    - å¤„ç†å®Œ **A** åï¼Œæ½œåœ¨å—æ”»å‡»è€…é›†åˆä¸º **{A, B, C, D, E, F}**ã€‚ä»¥**A**ä¸ºèµ·ç‚¹çš„æ”»å‡»åºåˆ—åˆ†æ”¯å›¾ç¤ºå¦‚ä¸‹ï¼š
>
>      ![A](image/A-deal.png)
>
> 3. å¤„ç†Eï¼š
>
>    - **E** è¢«åŠ å…¥æ½œåœ¨å—æ”»å‡»è€…é›†åˆã€‚
>
>    - **E** é›‡ä½£äº† **F**ï¼Œ**F** è¢«åŠ å…¥é›†åˆã€‚
>
>    - **F** é›‡ä½£äº† **G**ï¼Œ**G** è¢«åŠ å…¥é›†åˆã€‚ä»¥**E**ä¸ºèµ·ç‚¹çš„æ”»å‡»åºåˆ—åˆ†æ”¯å›¾ç¤ºå¦‚ä¸‹ï¼š
>
>      ![E](image/E-deal.png)
>
> æœ€ç»ˆï¼Œæ½œåœ¨å—æ”»å‡»è€…é›†åˆä¸º **{A, B, C, D, E, F, G}**ã€‚
>
> **æ­¥éª¤2ï¼šéå†é›†åˆ**
>
> åœ¨éå†æ½œåœ¨å—æ”»å‡»è€…é›†åˆæ—¶ï¼Œç¡®ä¿æ¯ä½å†’é™©è€…ä»…å—ä¸€æ¬¡æ”»å‡»ã€‚æœ€ç»ˆï¼Œ**A**ã€**B**ã€**C**ã€**D**ã€**E**ã€**F** å’Œ **G** æ¯äººä»…å—ä¸€æ¬¡æ”»å‡»ï¼Œå®Œæˆè¿ç¯é€’å½’æ”»å‡»ã€‚

#### æˆ˜æ–—ç±»å‹æ€»ç»“

| æˆ˜æ–—ç±»å‹`attack_type` | æ„ä¹‰                                                         |
| --------------------- | ------------------------------------------------------------ |
| `normal`              | æ™®é€šæˆ˜æ–—ï¼Œæ´åŠ©åŠŸèƒ½ä»…åœ¨æ­¤åœºæ™¯ä¸‹ç”Ÿæ•ˆã€‚å…¶ä½™æˆ˜æ–—è§„åˆ™è¯¦è§ç¬¬äº”æ¬¡ä½œä¸šï¼Œæ­¤å¤„ä¸åšèµ˜è¿° |
| `chain`               | é€’å½’æ”»å‡»æˆ˜æ–—ã€‚æ³¨æ„ï¼šéœ€è¦åœ¨è®¡ç®—å—æ”»å‡»æ–¹çš„æ•´ä½“é˜²å¾¡èƒ½åŠ›åï¼Œæ‰èƒ½åˆ¤å®šæˆ˜æ–—æ˜¯å¦æˆåŠŸï¼ˆè¯¦æƒ…å‚ç…§ç¬¬äº”æ¬¡ä½œä¸šè§„å®šï¼‰ |

### **ç§˜å¢ƒå·¥å‚æ¢é™©ï¼šç»ˆæå†’é™©æŒ‡å—**

**æ¬¢è¿è¯­**ï¼š åœ¨å†’é™©è€…ç‹å›½è¾‰ç…Œæ—…ç¨‹çš„å°¾å£°ï¼Œæˆ‘ä»¬éš†é‡æ¨å‡ºâ€œç§˜å¢ƒå·¥å‚æ¢é™©â€å‰¯æœ¬â€”â€”ä¸€åœºäº¤ç»‡ç€å¥‡å¹»ä¸æŒ‘æˆ˜çš„ç»ˆæç››å®´ã€‚è¯šé‚€æ‚¨ï¼Œè‹±å‹‡çš„æ¢é™©å®¶ï¼Œæ­¥å…¥è¿™ç‰‡è¢«é—å¿˜çš„è’èŠœä¹‹åœ°ï¼Œæ­å¼€å¤è€åºŸå¼ƒå·¥å‚çš„ç¥ç§˜é¢çº±ï¼Œè¿½å¯»é‚£ä¸–ä»£å®ˆæŠ¤çš„ç»ä¸–å®è—ã€‚

**æ¢é™©èƒŒæ™¯**ï¼š åœ¨è¿™ç‰‡è¢«æ—¶å…‰å°˜å°çš„é¢†åŸŸï¼Œä¸€åº§å¤è€è€Œç¥ç§˜çš„åºŸå¼ƒå·¥å‚éšåŒ¿å…¶é—´ï¼Œå…¶å†…è—æœ‰æ— æ•°æ¢é™©è€…æ¢¦å¯ä»¥æ±‚çš„ç¨€ä¸–çå®ã€‚ç„¶è€Œï¼Œé€šå¾€è£è€€çš„é“è·¯å¸ƒæ»¡è†æ£˜ï¼Œä¸€ç¾¤å‡¶æ‚çš„å®ˆå«æ€ªç‰©ç­‘èµ·äº†é“œå¢™é“å£ï¼Œèª“æ­»æå«å®è—çš„ç§˜å¯†ï¼Œæˆä¸ºæ¯ä½å‹‡è€…å‰è¡Œè·¯ä¸Šçš„ä¸¥å³»è€ƒéªŒã€‚

#### æˆ˜æ–—é€»è¾‘ä¸ç­–ç•¥

**æ ¸å¿ƒæœºåˆ¶**ï¼š

- **æˆ˜æ–—åŠ›å¯¹æ¯”**ï¼šå…·ä½“è€Œè¨€ï¼Œ**å‡»è´¥å®ˆé—¨æ€ªç‰©çš„å”¯ä¸€æ¡ä»¶ä¸ºï¼šæˆ˜æ–—æ–¹çš„ç»¼åˆæˆ˜åŠ›ï¼ˆæˆ˜æ–—æ–¹è‡ªèº«ã€æ‰€æºå¸¦çš„å…¨éƒ¨ç‰©å“ï¼Œä»¥åŠé›‡ä½£çš„æ‰€æœ‰å†’é™©è€…çš„æˆ˜æ–—åŠ›æ€»å’Œï¼‰å¿…é¡»ä¸¥æ ¼å¤§äºç›®æ ‡å®ˆé—¨æ€ªç‰©çš„æˆ˜æ–—åŠ›**ï¼Œè¯·æ³¨æ„æˆ˜æ–—åŠ›å’Œç»¼åˆæˆ˜åŠ›çš„åŒºåˆ«ã€‚ä¸€æ—¦è¾¾æˆæ­¤æ¡ä»¶ï¼Œæˆ˜æ–—å³å®£å‘Šèƒœåˆ©ï¼Œè€Œç›¸åº”çš„å®è—ä¹Ÿå°†ä½œä¸ºè£è€€çš„è±¡å¾ï¼Œèµ äºˆèƒœåˆ©çš„å‹‡è€…ã€‚
- **é¡ºåºæŒ‘æˆ˜**ï¼šæ¢é™©è€…éœ€æŒ‰å®ˆé—¨æ€ªç‰©**æˆ˜æ–—åŠ›ç”±ä½åˆ°é«˜**çš„é¡ºåºé€ä¸€æŒ‘æˆ˜ï¼Œæ¯å‡»è´¥ä¸€æ€ªï¼Œå³è§£é”é€šå¾€æ›´æ·±å±‚å®è—çš„è·¯å¾„ã€‚åŒæ—¶ï¼Œæ¢é™©è€…åŠå…¶é›‡ä½£çš„æ‰€æœ‰å†’é™©è€…éƒ½è·å¾—**å³æ—¶ç”Ÿæ•ˆ**çš„å®ç‰©åŠ æˆã€‚

| å®ˆé—¨æ€ªç‰©`Guard` | æˆ˜æ–—åŠ›`CE` | å®ç‰©ä¿¡æ¯`Treasure Info` | å®ç‰©åŠŸæ•ˆ          |
| --------------- | ---------- | ----------------------- | ----------------- |
| `Shd`ï¼ˆæš—å½±ï¼‰   | 1000       | `Cloak of Shadows`      | æ¯äººå¢åŠ é˜²å¾¡åŠ› 40 |
| `Flm`ï¼ˆçƒˆç„°ï¼‰   | 2000       | `Flamebrand Sword`      | æ¯äººå¢åŠ æ”»å‡»åŠ› 40 |
| `Stn`ï¼ˆçŸ³å«ï¼‰   | 3000       | `Stoneheart Amulet`     | æ¯äººå¢åŠ é˜²å¾¡åŠ› 40 |
| `Wnd`ï¼ˆé£çµï¼‰   | 4000       | `Windrunner Boots`      | æ¯äººå¢åŠ é˜²å¾¡åŠ› 30 |
| `Frz`ï¼ˆå†°éœœï¼‰   | 5000       | `Frostbite Staff`       | æ¯äººå¢åŠ æ”»å‡»åŠ› 50 |

#### ä¼ªä»£ç ä¸ç±»è®¾è®¡æ¦‚è§ˆ

ä¸ºäº†åŠ©åŠ›å„ä½è‹±å‹‡çš„æ¢é™©å®¶ï¼Œæˆ‘ä»¬ç‰¹æ­¤å‘å¸ƒè¯¦å°½æ”»ç•¥ï¼Œæ—¨åœ¨ç²¾å‡†æŒ‡å¯¼æ¯ä¸€ä½å†’é™©è€…å¦‚ä½•æ™ºå–å®ˆé—¨æ€ªç‰©ï¼Œå°†æ¢¦å¯ä»¥æ±‚çš„å®ç‰©æ”¶å…¥å›Šä¸­ã€‚ä»¥å®ˆé—¨æ€ªç‰© `Shd` ä¸ºä¾‹ï¼Œæˆ‘ä»¬ç»™å‡ºäº†è®¾è®¡å‚è€ƒã€‚

```java
// å®ˆé—¨æ€ªç‰©æ¥å£  
interface Guard {
    boolean fight(Adventurer adv); // å®ˆé—¨æ€ªç‰©ä¸å†’é™©è€…æˆ˜æ–—ï¼Œè¿”å›æˆ˜æ–—ç»“æœ 
    String getType(); // è¿”å›å®ˆé—¨æ€ªç‰©çš„ç±»å‹  
}

// å…·ä½“çš„å®ˆé—¨æ€ªç‰©ç±»ï¼ˆä»¥Shdä¸ºä¾‹ï¼‰  
class Shd implements Guard {
    @Override
    public boolean fight(Adventurer adv) {
        return adv.getComprehensiveCE() > 1000;
    }

    @Override
    public String getType() {
        return "Shd";
    }
}

// å®ç‰©æ¥å£  
interface Treasure {
    void showInfo(); // æ˜¾ç¤ºå®ç‰©ä¿¡æ¯çš„æ–¹æ³•  
    void useBy(Adventurer adv); // è®©è¯¥å†’é™©è€…è·å¾—è¿™ä¸ªå®ç‰©çš„åŠ æˆ
}

// å…·ä½“çš„å®ç‰©ç±»ï¼ˆä»¥Shdå¯¹åº”çš„å®ç‰©ä¸ºä¾‹ï¼‰  
class ShdTreasure implements Treasure {
    @Override
    public void showInfo() {
        System.out.println("Cloak of Shadows");
    }

    @Override
    public void useBy(Adventurer adv) {
        // TODO : å®ç°ä½ çš„é€»è¾‘
    }
}

// å®ç‰©å·¥å‚  
class TreasureFactory {
    public static Treasure createTreasure(Guard guard) {
        switch (guard.getType()) {
            case "Shd":
                return new ShdTreasure();
            // ... ä¸ºå…¶ä»–å®ˆé—¨æ€ªç‰©æ·»åŠ æ›´å¤šçš„case  
            default:
                throw new IllegalArgumentException("Unknown guard type");
        }
    }
}

// ä»£ç ç¤ºä¾‹  
public class AdventureGame {
    public static void main(String[] args) {
        Adventurer adv = ...;
        Guard shd = new Shd();
        if (shd.fight(adv)) {
            Treasure treasure = TreasureFactory.createTreasure(shd);
            treasure.showInfo(); // æ˜¾ç¤ºè·å¾—çš„å®ç‰©ä¿¡æ¯
            treasure.useBy(adv);
        }
    }
}
```

### æ“ä½œè¦æ±‚

åœ¨æœ¬æ¬¡ä½œä¸šä¸­ï¼Œåˆå§‹æ—¶ï¼Œä½ æ²¡æœ‰éœ€è¦ç®¡ç†çš„å†’é™©è€…ï¼Œæˆ‘ä»¬é€šè¿‡è‹¥å¹²æ¡æ“ä½œæŒ‡ä»¤æ¥ä¿®æ”¹å½“å‰çš„çŠ¶æ€ï¼š

ï¼ˆ**æ–°å¢æŒ‡ä»¤ 11-12ï¼ŒæŒ‡ä»¤ 10 çš„è¾“å…¥æ ¼å¼æœ‰å˜ï¼Œå…¶ä½™æŒ‡ä»¤è‹¥æ— ç‰¹æ®Šè¯´æ˜ï¼Œåˆ™è¦æ±‚å’Œé™åˆ¶åŒä¸Šä¸€æ¬¡è¿­ä»£ä½œä¸š**ï¼‰

1. åŠ å…¥ä¸€ä¸ªéœ€è¦ç®¡ç†çš„å†’é™©è€…ï¼ˆæ–°åŠ å…¥çš„å†’é™©è€…ä¸æ‹¥æœ‰ä»»ä½•è¯æ°´ç“¶ã€è£…å¤‡å’Œç¢ç‰‡ï¼Œå¹¶ä¸”åˆå§‹ä½“åŠ›ä¸º 500ï¼Œåˆå§‹æ”»å‡»åŠ›ä¸º 1ï¼Œåˆå§‹é˜²å¾¡åŠ›ä¸º 0ï¼‰
2. ç»™æŸä¸ªå†’é™©è€…å¢åŠ ä¸€ä¸ªè¯æ°´ç“¶
3. ç»™æŸä¸ªå†’é™©è€…å¢åŠ ä¸€ä¸ªè£…å¤‡
4. ç»™æŸä¸ªå†’é™©è€…çš„æŸä¸ªè£…å¤‡æå‡ä¸€ç‚¹è€ä¹…åº¦
5. åˆ é™¤æŸä¸ªå†’é™©è€…çš„æŸä¸ªç‰©å“
6. å†’é™©è€…å°è¯•æºå¸¦ä»–æ‹¥æœ‰çš„æŸä¸ªç‰©å“
7. å†’é™©è€…ä½¿ç”¨æŸä¸ªè¯æ°´ç“¶
8. å†’é™©è€…è·å¾—ä¸€ä¸ªç¢ç‰‡
9. å†’é™©è€…å°è¯•å…‘æ¢ä¸€æ¬¡ç¦åˆ©
10. å†’é™©è€…å°è¯•è¿›è¡Œä¸€æ¬¡æˆ˜æ–—
11. å†’é™©è€…é›‡ä½£å¦ä¸€ä½é›‡ä½£è€…
12. å†’é™©è€…è¿›å…¥â€ç§˜å¢ƒå·¥å‚æ¢é™©â€œå‰¯æœ¬

### è¾“å…¥è¾“å‡ºæ ¼å¼

ç¬¬ä¸€è¡Œä¸€ä¸ªæ•´æ•° nï¼Œè¡¨ç¤ºæ“ä½œçš„ä¸ªæ•°ã€‚

æ¥ä¸‹æ¥çš„ n è¡Œï¼Œæ¯è¡Œä¸€ä¸ªå½¢å¦‚ `{type} {attribute}` çš„æ“ä½œï¼Œ`{type}` å’Œ `{attribute}` é—´ã€è‹¥å¹²ä¸ª `{attribute}` é—´ä½¿ç”¨**è‹¥å¹²**ä¸ªç©ºæ ¼åˆ†å‰²ï¼Œæ“ä½œè¾“å…¥å½¢å¼åŠå…¶å«ä¹‰å¦‚ä¸‹

| type | attribute                                                    | æ„ä¹‰                                                         | è¾“å‡ºï¼ˆæ¯æ¡å¯¹åº”å ä¸€è¡Œï¼‰                                       |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1    | `{adv_id} {name}`                                            | åŠ å…¥ä¸€ä¸ª ID ä¸º `{adv_id}`ã€åå­—ä¸º `{name}` çš„å†’é™©è€…          | æ—                                                            |
| 2    | `{adv_id} {bot_id} {name} {capacity} {type} {CE}`            | ç»™ ID ä¸º `{adv_id}` çš„å†’é™©è€…å¢åŠ ä¸€ä¸ªè¯æ°´ç“¶ï¼Œè¯æ°´ç“¶çš„ IDã€åå­—ã€å®¹é‡ã€ç±»å‹ã€æˆ˜æ–—åŠ›åˆ†åˆ«ä¸º `{bot_id}`ã€`{name}`ã€`{capacity}ã€{type}ã€{CE}`ã€‚ç‰¹åˆ«åœ°ï¼Œå½“typeä¸º `HpBottle` æ—¶ï¼Œæˆ‘ä»¬ä¿è¯è¾“å…¥çš„`CE`ä¸º 00 | æ—                                                            |
| 3    | `{adv_id} {equ_id} {name} {durability} {type} {CE}`          | ç»™ ID ä¸º `{adv_id}` çš„å†’é™©è€…å¢åŠ ä¸€ä¸ªè£…å¤‡ï¼Œè£…å¤‡çš„ IDã€åå­—ã€è€ä¹…åº¦ã€ç±»å‹ã€æˆ˜æ–—åŠ›åˆ†åˆ«ä¸º `{equ_id}`ã€`{name}`ã€`{durability}ã€{type}ã€{CE}` | æ—                                                            |
| 4    | `{adv_id} {equ_id}`                                          | å°† ID ä¸º `{adv_id}` çš„å†’é™©è€…çš„ id ä¸º `{equ_id}` çš„è£…å¤‡æå‡ä¸€ç‚¹è€ä¹…åº¦ | `{ä¸€ä¸ªå­—ç¬¦ä¸²} {ä¸€ä¸ªæ•´æ•°}`ï¼Œå­—ç¬¦ä¸²ä¸ºè£…å¤‡çš„ nameï¼Œæ•´æ•°ä¸ºè£…å¤‡æå‡è€ä¹…åçš„è€ä¹…åº¦ |
| 5    | `{adv_id} {id}`                                              | å°† ID ä¸º`{adv_id}`çš„å†’é™©è€…çš„ id ä¸º `{id}` çš„ç‰©å“åˆ é™¤         | `{ä¸€ä¸ªå­—ç¬¦ä¸²A} {ä¸€ä¸ªå­—ç¬¦ä¸²B} {ä¸€ä¸ªæ•´æ•°C}`ï¼Œå­—ç¬¦ä¸² A ä¸ºç‰©å“çš„ç±»åï¼ˆç­”æ¡ˆåªèƒ½åœ¨ä»¥ä¸‹ç±»åä¸­æŒ‘é€‰å…¶ä¸€ï¼š `HpBottle`ã€`AtkBottle`ã€`DefBottle`ã€`Axe`ã€`Sword`ã€`Blade`ï¼‰ï¼Œå­—ç¬¦ä¸² B ä¸ºè¢«åˆ é™¤çš„ç‰©å“çš„name è‹¥ç‰©å“ä¸º**è¯æ°´ç“¶**ï¼šæ•´æ•° C ä¸ºè¢«åˆ é™¤çš„è¯æ°´ç“¶çš„å®¹é‡ è‹¥ç‰©å“ä¸º**è£…å¤‡**ï¼šæ•´æ•° C ä¸ºè¢«åˆ é™¤çš„è£…å¤‡çš„è€ä¹…åº¦ |
| 6    | `{adv_id} {id}`                                              | ID ä¸º `{adv_id}` çš„å†’é™©è€…å°è¯•æºå¸¦ id ä¸º `{id}` çš„ç‰©å“        | æ—                                                            |
| 7    | `{adv_id} {bot_id}`                                          | ID ä¸º `{adv_id}` çš„å†’é™©è€…å°è¯•ä½¿ç”¨ä»–æ‹¥æœ‰çš„ id ä¸º`{bot_id}`çš„è¯æ°´ç“¶ | æˆåŠŸï¼š`{ä¸€ä¸ªå­—ç¬¦ä¸²} {ä¸€ä¸ªæ•´æ•°A} {ä¸€ä¸ªæ•´æ•°B} {ä¸€ä¸ªæ•´æ•°C}`ï¼Œå­—ç¬¦ä¸²ä¸ºè¯¥å†’é™©è€…çš„ `name`ï¼Œæ•´æ•° A ä¸ºè¯¥å†’é™©è€…ä½¿ç”¨è¯¥è¯æ°´ç“¶åçš„ä½“åŠ›å€¼ï¼Œæ•´æ•° B ä¸ºè¯¥å†’é™©è€…ä½¿ç”¨è¯¥è¯æ°´ç“¶åçš„æ”»å‡»åŠ›å€¼ï¼Œæ•´æ•° C ä¸ºè¯¥å†’é™©è€…ä½¿ç”¨è¯¥è¯æ°´ç“¶åçš„é˜²å¾¡åŠ›å€¼ å¤±è´¥ï¼š `{adv_name} fail to use {name}`ï¼Œ`adv_name` ä¸º ID ä¸º `adv_id` çš„å†’é™©è€…çš„ nameï¼Œ `name` ä¸º ID ä¸º `bot_id`çš„è¯æ°´ç“¶çš„ name) |
| 8    | `{adv_id} {frag_id} {name}`                                  | ID ä¸º`{adv_id}`çš„å†’é™©è€…è·å¾—ä¸€ä¸ª id ã€åå­—åˆ†åˆ«ä¸º`{frag_id}`ã€`{name}`çš„ç¢ç‰‡ | æ—                                                            |
| 9    | `{adv_id} {name} {welfare_id}`                               | ID ä¸º`{adv_id}`çš„å†’é™©è€…å°è¯•ä½¿ç”¨å…¶æ‹¥æœ‰çš„åå­—ä¸º`name`çš„ç¢ç‰‡å…‘æ¢ä¸€æ¬¡ç¦åˆ©ï¼Œç¦åˆ©æ ‡è¯†ç ä¸º`welfare_id` | **æˆåŠŸ**ï¼š**a)** `{ä¸€ä¸ªå­—ç¬¦ä¸²} {ä¸€ä¸ªæ•´æ•°}`ï¼Œå­—ç¬¦ä¸²ä¸ºå¯¹åº”è¯æ°´ç“¶çš„nameï¼Œæ•´æ•°ä¸ºå¯¹åº”è¯æ°´ç“¶çš„å®¹é‡ **b)** `{ä¸€ä¸ªå­—ç¬¦ä¸²} {ä¸€ä¸ªæ•´æ•°}`ï¼Œå­—ç¬¦ä¸²ä¸ºå¯¹åº”è£…å¤‡çš„nameï¼Œæ•´æ•°ä¸ºå¯¹åº”è£…å¤‡çš„æ–°è€ä¹…åº¦ **c)** `Congratulations! HpBottle {name} acquired` ï¼Œnameä¸ºè·å¾—çš„è¯æ°´ç“¶çš„name **å¤±è´¥**ï¼š`{ä¸€ä¸ªæ•´æ•°}: Not enough fragments collected yet` ï¼Œ æ•´æ•°ä¸ºè¯¥å†’é™©è€…æ‹¥æœ‰çš„åå­—ä¸º`frag_name`çš„ç¢ç‰‡çš„æ•°ç›® |
| 10   | `{adv_id}  {name} {attack_type} {k}` `{adv_id_1}` `{adv_id_2}` â€¦ `{adv_id_k}` | ID ä¸º `{adv_id}` çš„å†’é™©è€…å°è¯•ä½¿ç”¨åå­—ä¸º `{name}`çš„è£…å¤‡ä¸`k`ä¸ªå†’é™©è€…è¿›è¡Œä¸€æ¬¡æˆ˜æ–—ç±»å‹ä¸º`{attack_type}`çš„æˆ˜æ–—ï¼ˆkä¸ªå†’é™©è€…çš„ ID åˆ†åˆ«ä¸º `adv_id_1`ã€`adv_id_2`ã€â€¦ã€`adv_id_k`ï¼‰ | **`normal`æˆåŠŸ**ï¼šè¾“å‡º`k`è¡Œï¼Œç¬¬`m`è¡Œçš„æ ¼å¼ä¸º`{ID ä¸º adv_id_mçš„å†’é™©è€…çš„name} {ID ä¸º adv_id_mçš„å†’é™©è€…å—åˆ°æ”»å‡»åçš„ä½“åŠ›å€¼}`  `chain`æˆåŠŸï¼š`{ä¸€ä¸ªæ•´æ•°}`ï¼Œæ•´æ•°ä¸ºæœ¬æ¬¡æˆ˜æ–—ä¸­æ‰€æœ‰å†’é™©è€…å¤±å»çš„ä½“åŠ›å€¼çš„æ€»å’Œ **æˆ˜æ–—å¤±è´¥**ï¼š`Adventurer {adv_id} defeated`ï¼Œå…¶ä¸­`{adv_id}`ä¸ºè¾“å…¥ä¸­çš„æ”»å‡»è€…çš„ ID |
| 11   | `{adv_id_1} {adv_id_2}`                                      | ID ä¸º `{adv_id_1}`çš„å†’é™©è€…é›‡ä½£ ID ä¸º `{adv_id_2}`çš„å†’é™©è€…    | æ—                                                            |
| 12   | `{adv_id}`                                                   | ID ä¸º `{adv_id}`çš„å†’é™©è€…æŒ‘æˆ˜â€ç§˜å¢ƒæ¢é™©å·¥å‚â€œå‰¯æœ¬               | æŒ‰å®ç‰©è·å¾—çš„é¡ºåºä»æ—©åˆ°æ™šè¾“å‡º `k` è¡Œï¼Œæ¯è¡Œä¸º`{ä¸€ä¸ªå­—ç¬¦ä¸²}`ï¼Œå­—ç¬¦ä¸²ä¸ºå®ç‰©ä¿¡æ¯ã€‚å¦‚æœå†’é™©è€…åœ¨è¿™æ¬¡å‰¯æœ¬æ¢é™©å†…æ²¡æœ‰è·å¾—å®ç‰©ï¼Œåˆ™ä¸è¾“å‡ºã€‚ |

### æ ·ä¾‹

#### è¾“å…¥

```
9
1 988244353 adv1
2 988244353 1 bottle 50 AtkBottle 1000
3 988244353 2 equipment 50 Axe 2000
6 988244353 1
6 988244353 2
1 1000000007 adv2
11 988244353 1000000007
12 988244353
7 988244353 1
```

#### è¾“å‡º

```
Cloak of Shadows
Flamebrand Sword
Stoneheart Amulet
adv1 500 1041 80
```

### æ•°æ®é™åˆ¶

#### å˜é‡çº¦æŸ

| å˜é‡         | ç±»å‹   | è¯´æ˜                                   |
| ------------ | ------ | -------------------------------------- |
| `id`         | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š0 - 2147483647               |
| `name`       | å­—ç¬¦ä¸² | ä¿è¯ä¸ä¼šå‡ºç°ç©ºç™½å­—ç¬¦ï¼Œé•¿åº¦åŒºé—´: (0,40) |
| `capacity`   | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š0 - 2147483647               |
| `durability` | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š1 - 2147483647               |
| `HitPoint`   | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š1 - 2147483647               |
| `CE`         | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š0 - 2147483647               |
| `atk`        | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š1 - 1073741823               |
| `def`        | æ•´æ•°   | å–å€¼èŒƒå›´ï¼š0 - 1073741823               |

æ³¨æ„ï¼Œå˜é‡çº¦æŸæŒ‡çš„æ˜¯ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ï¼Œè¾“å…¥å’Œå¯¹åº”å±æ€§å€¼å‡ä¿è¯åœ¨è¡¨æ ¼ä¸­ç»™å‡ºçš„èŒƒå›´å†…ã€‚

#### æ“ä½œçº¦æŸ

1. **ä¿è¯æ‰€æœ‰çš„å†’é™©è€…ã€è¯æ°´ç“¶ã€è£…å¤‡ id å‡ä¸ç›¸åŒã€‚è€Œç¢ç‰‡ä¹‹é—´çš„ id å¯ä»¥ç›¸åŒï¼Œè¢«åˆ é™¤æˆ–è¢«é”€æ¯çš„ç‰©å“çš„ id ä¸å¯èƒ½æˆä¸ºç¢ç‰‡çš„ id**
2. ä¿è¯åˆ é™¤äº†çš„è¯æ°´ç“¶/è£…å¤‡çš„ id ä¸ä¼šå†æ¬¡å‡ºç°ï¼Œä¿è¯å› è€ä¹…åº¦é™ä¸º0è€Œè¢«é”€æ¯çš„è£…å¤‡çš„ id ä¸ä¼šå†æ¬¡å‡ºç°
3. æ“ä½œ 2-12 ä¿è¯æ‰€æœ‰å†’é™©è€…å‡å·²å­˜åœ¨
4. æ“ä½œ 4-7/10 ä¿è¯è¯¥å†’é™©è€…æ‹¥æœ‰æ“ä½œä¸­æåˆ° id çš„è¯æ°´ç“¶æˆ–è£…å¤‡
5. æ“ä½œ 9 ä¿è¯è¯¥å†’é™©è€…æ‹¥æœ‰è‡³å°‘ä¸€ä¸ªæ“ä½œä¸­æåˆ°`name`çš„ç¢ç‰‡ã€‚ä¸”ä¿è¯æ‰€åˆ†é…çš„`welfare_id`å°†ç¡®ä¿ä¸ºè¯¥å†’é™©è€…å½“å‰å·²æŒæœ‰çš„ç‰©å“IDä¹‹ä¸€ï¼Œæˆ–æ˜¯ä¸€ä¸ªå…¨æ–°ä¸”æ­¤å‰ä»æœªå‡ºç°è¿‡çš„ID
6. ä¿è¯å¢åŠ çš„è£…å¤‡ã€è¯æ°´ç“¶åŸæœ¬ä¸å­˜åœ¨
7. æ“ä½œæ•°æ»¡è¶³ 1â‰¤nâ‰¤10000
8. æˆ˜æ–—ä¸­è¢«æ”»å‡»çš„äººæ•°æ»¡è¶³1â‰¤kâ‰¤10
9. æ“ä½œ 2 ä¿è¯ï¼šå½“ type ä¸º `HpBottle` æ—¶ï¼Œè¾“å…¥çš„ CE ä¸€å®šä¸º 0
10. æ“ä½œ 7/10 **ä¸**ä¿è¯ï¼šæåˆ°çš„è¯æ°´ç“¶æˆ–è£…å¤‡å·²è¢«æºå¸¦
11. ä¿è¯æˆ˜æ–—ç»“æŸåï¼Œæ‰€æœ‰ç›¸å…³å†’é™©è€…çš„ä½“åŠ›å€¼å‡ä¿æŒåœ¨å¤§äº 0 çš„å®‰å…¨èŒƒå›´å†…
12. æ“ä½œ 11 ä¿è¯ ID ä¸º `{adv_id_2}` çš„å†’é™©è€…æœªè¢« `{adv_id_1}` çš„å†’é™©è€…é›‡ä½£ï¼Œä¿è¯ä¸ä¼šå‡ºç°ä¸¤ä¸ªæˆ–å¤šä¸ªå†’é™©è€…ä¹‹é—´å¾ªç¯é›‡ä½£çš„æƒ…å†µ
13. å¯¹äºæ¯ä¸ªå†’é™©è€…ï¼Œä¿è¯æ‰€é›‡ä½£çš„å†’é™©è€…ä¸è¶…è¿‡ 10 ä¸ª
14. ä¿è¯é€’å½’æ”»å‡»æˆ˜æ–—æœ€å¤šå‡ºç° 50 æ¬¡
15. ä¿è¯æ“ä½œ 12 æœ€å¤šå‡ºç° 50 æ¬¡

### æç¤º

è€ƒè™‘åˆ°æ­£è¯¾å°šæœªè®²è§£æœ‰å…³è¾“å…¥è§£æçš„å†…å®¹ï¼Œæˆ‘ä»¬åœ¨æ­¤æä¾›ä¸€ä»½è¾“å…¥è§£æä»£ç ï¼ŒåŒå­¦ä»¬å¯ä»¥å°†å…¶å¤åˆ¶åˆ°è‡ªå·±ä»£ç ä¸­çš„é€‚å½“ä½ç½®ç›´æ¥ä½¿ç”¨ï¼Œå½“ç„¶ï¼ŒåŒå­¦ä»¬ä¹Ÿå¯ä»¥è‡ªè¡Œè®¾è®¡ä»£ç æ¥è¿›è¡Œè¾“å…¥è§£æã€‚

```java
ArrayList<ArrayList<String>> inputInfo = new ArrayList<>(); // è§£æåçš„è¾“å…¥å°†ä¼šå­˜è¿›è¯¥å®¹å™¨ä¸­, ç±»ä¼¼äºcè¯­è¨€çš„äºŒç»´æ•°ç»„
Scanner scanner = new Scanner(System.in);
int n = Integer.parseInt(scanner.nextLine().trim()); // è¯»å–è¡Œæ•°
for (int i = 0; i < n; ++i) {
   String nextLine = scanner.nextLine(); // è¯»å–æœ¬è¡ŒæŒ‡ä»¤
   String[] strings = nextLine.trim().split(" +"); // æŒ‰ç©ºæ ¼å¯¹è¡Œè¿›è¡Œåˆ†å‰²
   inputInfo.add(new ArrayList<>(Arrays.asList(strings))); // å°†æŒ‡ä»¤åˆ†å‰²åçš„å„ä¸ªéƒ¨åˆ†å­˜è¿›å®¹å™¨ä¸­
}
```

ç»è¿‡è¿™æ®µä»£ç ï¼Œè¾“å…¥çš„ä¿¡æ¯ä¼šè¢«å­˜å…¥ `inputInfo` è¿™ä¸ª"äºŒç»´æ•°ç»„"ä¸­ï¼Œéå†è¯¥å®¹å™¨å³å¯å–å‡ºå„è¡ŒæŒ‡ä»¤åŠå…¶å„ä¸ªéƒ¨åˆ†ã€‚

## æ€»ç»“ ğŸ’•â¤ï¸ğŸ˜

### é‡æ„ ğŸ˜ğŸ˜

åœ¨å¼€å§‹åšè¿™æ¬¡çš„ä½œä¸šä¹‹å‰ï¼Œæˆ‘å…ˆå¯¹ä»¥å‰çš„ä½œä¸šè¿›è¡Œäº†ä¸€æ¬¡é‡æ„ï¼ŒåŠ å…¥äº†è®¾è®¡æ¨¡å¼çš„æ€æƒ³ï¼ğŸ¥°

#### å·¥å‚æ¨¡å¼çš„åˆ›å»º ğŸ¥³

åˆ›å»ºäº†`BottleFactory`å’Œ`EquipmentFactory`ä¸¤ä¸ªå·¥å‚æ¥å£ï¼Œç„¶åé€šè¿‡å®ç°æ¥å£ï¼Œåˆ›å»ºäº† `AtkBottleFactory` `DefBottleFactory` `HpBottleFactory` `AxeFactory` `BladeFactory` `SwordFactory` è¿™å‡ ä¸ªå·¥å‚ç±» ğŸ˜£

è¿™æ ·ä¼˜åŒ–äº†`Bottle`å’Œ`Equipment`çš„å„ç§å­ç±»å‹çš„å®ä¾‹åŒ–ï¼Œå®ç°äº†å°è£…çš„æ€æƒ³ ğŸ˜ğŸ˜ğŸ˜

åŒæ—¶ï¼Œå¯¹äº*ç§˜å¢ƒå·¥å‚æ¢é™©å‰¯æœ¬*ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ç±»ä¼¼åœ°å»åˆ›å»ºå®ç‰©å·¥å‚

#### è½¯ä»¶åŒ…çš„åˆ›å»º ğŸ«¡

åœ¨ä¹‹å‰çš„å‡ æ¬¡ä½œä¸šå½“ä¸­ï¼Œæˆ‘ä»¬éƒ½æ˜¯æŠŠæ‰€æœ‰çš„ç±»å’Œæ¥å£æ”¾åœ¨ `src` ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œé¢çš„ï¼Œåœ¨è¿™æ¬¡çš„é‡æ„é‡Œï¼Œæˆ‘åˆ›å»ºäº†å‡ ä¸ªè½¯ä»¶åŒ…æ¥è¿›è¡Œåˆ†ç±»ç®¡ç†ï¼Œä½¿å¾—ç›¸åŒç‰¹å¾çš„ç±»åœ¨**ä¸€ä¸ªè½¯ä»¶åŒ…**é‡Œé¢ï¼Œè¿™æ ·å¯¹æ£€æŸ¥ä»£ç debugä¹Ÿæœ‰å¥½å¤„ã€‚

ä¸è¿‡ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸ºäº†ç»Ÿä¸€æ€§ï¼Œå»ºè®®åœ¨åˆ›å»ºè½¯ä»¶åŒ…ä¹‹åæŠŠæ‰€æœ‰çš„å¯è§æ€§æ”¹ä¸º `public` å¦åˆ™å¯èƒ½å‡ºç°æ‰¾ä¸åˆ°ç±»çš„æƒ…å†µï¼ğŸ˜µâ€ğŸ’«

### è¿­ä»£ ğŸ˜‹ğŸ˜‹

#### è§‚å¯Ÿè€…æ¨¡å¼çš„åˆ›å»º ğŸ˜£

å¯¹äºæ¯ä¸ªå†’é™©è€…`Adventure`ç±»ï¼Œä¸ºäº†å®ç°é›‡ä½£çš„åŠŸèƒ½ï¼Œéœ€è¦è®©è¢«é›‡ä½£çš„å†’é™©è€…å»ç›‘å¬é›‡ä½£è€…çš„ä½“åŠ›å˜åŒ–æƒ…å†µï¼Œè¿™æ ·çš„ä¸€ä¸ªåŠŸèƒ½å°±æ˜¯å…¸å‹çš„è§‚å¯Ÿè€…æ¨¡å¼ï¼

åœ¨è¿™é‡Œï¼Œæˆ‘åˆ›å»ºäº†è§‚å¯Ÿè€…æ¥å£ `Watcher` å’Œè¢«è§‚å¯Ÿè€…æ¥å£ `Observed` 

```java
package adventurer;

public interface Observed {
    public void registerObserver(Watcher o);

    public void notifyObservers();
}
```

```java
package adventurer;

public interface Watcher {
    public void watch(Observed o);
}
```

ç„¶åï¼Œè®© `Adventure` å»å®ç°è¿™ä¸¤ä¸ªæ¥å£å°±å¯ä»¥å•¦ï¼ğŸ˜ŒğŸ˜ŒğŸ˜Œ

#### ç§˜å¢ƒå·¥å‚æ¢é™© ğŸ‘¿

è¿™é‡Œçš„å‰¯æœ¬å°±å¯ä»¥å†å•ç‹¬éš”ç¦»å‡ºä¸€ä¸ªè½¯ä»¶åŒ…`uncharted`ï¼Œç„¶åæŒ‰ç…§æŒ‡å¯¼ä¹¦ä¸Šé¢çš„å»ºè®®å»åˆ†åˆ«æ„é€ å°±å¯ä»¥äº†ï¼Œä¸ç®—å¾ˆéš¾

#### æ³¨æ„ç‚¹ ğŸ˜ªğŸ¥±

- è¿™æ¬¡è®¾è®¡ `HashMap` çš„éå†æ›´æ”¹æ˜¯å¾ˆå¤šçš„ï¼Œæœ‰äº†ä¸Šæ¬¡çš„ç»éªŒï¼Œæˆ‘**å…¨éƒ¨éƒ½ä½¿ç”¨äº†è¿­ä»£å™¨æ¥è¿›è¡Œæ“ä½œ**ï¼Œè¿™æ¬¡å¼ºæµ‹æ€»ä¸ä¼šç»™æˆ‘æŠ¥é”™äº†å§~~~ï¼Œå†æŠ¥é”™æˆ‘çœŸçš„ä¼šç–¯æ‰çš„ğŸ¤¡
- å¯¹äºæŸ¥æ‰¾æ½œåœ¨è¢«æ”»å‡»è€…çš„é€’å½’æ“ä½œæ—¶ï¼Œè¦æ³¨æ„**é€’å½’çš„å±‚æ•°ä¸èƒ½å¤§äº5**ï¼Œæˆ‘æœ€å¼€å§‹å°±æ²¡æœ‰æ³¨æ„åˆ° ğŸ˜Ÿ

```java
HashSet<Adventure> totalAttacks = new HashSet<>();
for (Adventure adventure : attacks) {
    int currentDepth = 1;
    totalAttacks.add(adventure);
    adventure.findAttacks(totalAttacks, currentDepth);
}    

	public void findAttacks(HashSet<Adventure> totalAttacks, int currentDepth) {
        if (currentDepth < 5) {			// æ˜¯å°äº5ï¼Œä¸æ˜¯å°äºç­‰äº
            watchers.keySet().forEach(key -> {
                totalAttacks.add((Adventure) key);
                ((Adventure) key).findAttacks(totalAttacks, currentDepth + 1);
            });
        }
    }
```

### ç±»å›¾ ğŸ˜šğŸ˜š

åœ¨è¿™é‡Œç»™å‡ºæˆ‘çš„ç±»å›¾ï¼ï¼ï¼è¿˜æ˜¯éå¸¸çš„æœ‰æˆå°±æ„Ÿçš„ ğŸ¥°

![](image/class.png)

### 10.24æ›´æ–° ğŸ¤¡ğŸ¤¡

å®Œè›‹äº†ï¼Œç¬¬å…­æ¬¡ä½œä¸šçš„å¼ºæµ‹ä¹Ÿå¯„æ‰äº†ï¼Œæ€»ç»“äº†ä¸€ä¸‹ï¼Œä¸»è¦æ˜¯ä¸€ä¸ªåŸå› 

> æŒ‡å¯¼ä¹¦ä¸­çš„`normal`æˆ˜æ–—ç±»å‹çš„æˆåŠŸæˆ˜æ–—åçš„æ‰§è¡Œé¡ºåºåº”è¯¥æ˜¯ï¼š
>
> æˆ˜æ–—æ‰£è¡€->**è£…å¤‡è€ä¹…åº¦å‡ä¸€**->é›‡ä½£è€…æ´åŠ©->é›‡ä½£è€…åˆ¤æ–­æ˜¯å¦æŒç»­é›‡ä½£å…³ç³»

æˆ‘åœ¨æœ€åˆçš„ä»£ç ä¸­å¿½ç•¥äº†è¿™ä¸ªç‚¹ï¼Œæˆ‘æ˜¯åœ¨æœ€åæ‰è¿›è¡Œè£…å¤‡è€ä¹…åº¦å‡ä¸€çš„æ“ä½œï¼Œå¯¹äºä»¥ä¸‹è¿™ç§ç‰¹æ®Šæƒ…å†µï¼Œæ˜¯ä¸ç¬¦åˆè¦æ±‚çš„ï¼ğŸ˜ª

> ï¼ˆè®¨è®ºåŒºç»™å‡ºçš„ç‰¹æ®Šæƒ…å†µï¼‰ğŸ«¡ğŸ«¡ğŸ«¡
>
> å› ä¸ºå­˜åœ¨è¢«é›‡ä½£è€…æ”»å‡»é›‡ä½£è€…çš„æƒ…å†µï¼Œå‡è‹¥è¢«é›‡ä½£è€…æ”»å‡»çš„è£…å¤‡ç¢°å·§å¿«æŠ¥åºŸäº†ï¼ˆè€ä¹…åº¦ä¸º1ï¼‰ï¼Œé‚£ä¹ˆ
>
> è¢«æ”»å‡»çš„é›‡ä½£è€…æ‰£è¡€åï¼Œè£…å¤‡ä¼šæŠ¥åºŸï¼Œè€Œè¢«é›‡ä½£è€…å¯ä»¥**åœ¨å¯¹é›‡ä½£è€…é€ æˆä¼¤å®³çš„åŒæ—¶ä¸ç”¨ç»™è€æ¿ä»»ä½•å®ä½“æ´åŠ©å°±è·å¾—æ´åŠ©æ¬¡æ•°**

#### æ€è€ƒ

- æ ¹æ®è¿™å‡ æ¬¡ä½œä¸šçš„äº§ç”Ÿçš„ä¸€ç‚¹å°æ€è€ƒï¼Œæˆ‘å‘ç°åœ¨æ„é€  `Bottle` ä»¥åŠ `Equipment` çš„æ—¶å€™ï¼Œä¸åº”è¯¥ä¼ å…¥å„ç§å‚æ•°ä¹‹åæ‰ new ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œåº”è¯¥åœ¨å¤–é¢ new å®Œä¸€ä¸ªå¯¹è±¡ä¹‹åå†ä¼ å…¥å®ƒçš„å¼•ç”¨ï¼ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³ğŸ¥³
- åŒæ—¶ï¼Œç”±äºæœ‰äº›æ–¹æ³•è¿‡é•¿ï¼Œæˆ‘ä½¿ç”¨äº†Java8ç‰¹æ€§ä¸­çš„æµ `Stream` API æ¥**ç®€åŒ–ä»£ç **
 ``` Java
 int maxDef1 = 0;
 for (Adventure adventure : attacks) {
     if (adventure.getDef() > maxDef1) {
         maxDef1 = adventure.getDef();
     }
 }
 ```

å¯ä»¥æ›´æ”¹ä¸º

```Java
int maxDef1 = attacks.stream().mapToInt(Adventure::getDef).max().orElse(0);
```

ä¸¾ä¸€åä¸‰ï¼Œä½ è¿˜å¯ä»¥å¯¹è¿™ä¸ªè¿›è¡Œè½¬æ¢

```Java
ArrayList<Integer> attacksHitPoint = new ArrayList<>();
for (Adventure adventure : attacks) {
    attacksHitPoint.add(adventure.getHitPoint());
}
```

```Java
List<Integer> attacksHitPoint = attacks.stream()
                                       .map(Adventure::getHitPoint)
                                       .collect(Collectors.toList());

```

